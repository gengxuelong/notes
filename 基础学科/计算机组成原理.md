# 计算机组成原理

## 晶体管和电子管

电子管：

- 结构: 导线，金属片，玻璃外壳，真空环境

- 管脚数：6或更多

- 功耗：几个瓦特

晶体管：

- 结构：由硅制成的固态原件
- 管脚数：3 
- 功耗： 几百毫瓦

## 集成电路：

集成的是晶体管；

第一个集成电路集成了4晶体管

用集成电路做计算机效率更高

## 单位：

K  ： 2^10

M :   2^20

G : 2^30

T : 2^40

>  IC : 集成电路

IC 的集成度越高:

- 价格低
- 速度快（因为路程短了）
- 体积小
- 功耗低
- 可靠性高

## 微处理器时代

第一个微处理器字长为4位

之后又更改为8位，一个8位的微处理器为Intel8080 ，他的问世标志着微处理器时代的到来

个人计算机：最早的个人计算机是苹果公司研发生产的

寻址4G的空间，是2^32 个bit 

#### Intel公司的典型微处理器产品

8080

8086

80286

80386

Pentium

Pentium Pro

Pentium 2 

Pentium 3

Pentium 4

 CPU 的位数：

​       指的是算数运算单元的位数

加个“准” 字，说明数据总线不是相应位数。

IBM 公司的PC产品，小型机

### 新技术：

-  超标量:两条指令同时执行，既有两个CPU
- 流水线：并行
- RISC ： 简单指令
- 工作站：中型机

### 程序存储，顺序执行。。冯诺依曼提出的计算机原理



## 数制系统

十进制：

0,1,2,3 4 5  6 7 8 9

逢十进一

计算机使用二进制数的原因是：

 。。。

十进制： D

二进制：B

八进制：Q

十六进制： H

小数变二进制：乘二取整，第一位为高位



二进制变八进制：

三个数为一个单位，划单位

十进制的小数有些是不能准确表示成小数的，会无限，

## 数的表示

### 有符号和无符号数

- 无符号数：
- 有符号数：首位是符号位，0是正，1是负
  - 有符号数和无符号数，相同的位 能表示的数的个数是相同的，均为2^n
  - 有符号数=机器数=机器码
  - 把符号位和数值位一起编码的数，叫做机器数或机器码
  - 0，+，-，无穷，小数点：均为特殊

- 定点数的表示

  - 小数点位置固定不变的数，定点运算是基本运算，浮点运算会转化为定点运算
  - 定点小数：整数部分为0；
  - 定点整数： 整数
  - 小数点中是没有物理实体记录小数点的小数点在人心中（定点数）
  - 

  

  

  ​		

- 浮点数
  - 小数点位置不是固定不变的数
  - 小数点位置可以放在任意位置
  - 为何要用浮点数：
    - 定点数在数的表示范围上是有限制的
    - 定点数的精度是有限制的
    - 浮点数表示数的范围和精度都是很高的

## 机器码（至少十分）

- 机器码与真值
  - 真值可以用二进制表示，也可以用十进制表示
  - 机器码的表示：原码，反码，补码，移码
  - 真值：带符号的数，二进制的在本课程中也不用写（2）下标
- 原码
  - 原码，就是他的机器数
  - 原码千万不要写（2）下标
  - 计算机中我们需要的最基础的码就是原码
- 反码
  - 符号位不变，其他数取反，仅针对负数
- 补码
  - 反码末位加1（仅针对负数）
  - 补码的意义：可以将减法转化为加法运算，大大减少了运算器的复杂度
- 移码
  - 补码的符号位取反就是移码
  - 解决用编码就能判断数的大小，一般只有通过真值才能认为判断大小，转换为移码后，移码就没有符号位了，全是数值位
  - 移码主要用在浮点数运算中

--- 对于正数：符号位为零，原码=补码=反码

--- 补码的例子是参考了调时钟的生活实际，

- 原码实现了对符号位的表示
- 反码是补码的过渡
- 补码是为了将减法转化为加法

1. 原码的运算： 既所有手工运算
2. 补码的运算：计算机中进行了运算

例一：

设及其数字字长为8位（其中一位是符号位）。对于整数，党旗分别代表无符号数、原码、补码和反码时，对应的真值范围各自多少

![](D:\截图\离散数学\5.png)

原码和反码的取值范围是相同的

> 对一个补码再求一次补码，就得到了原码
>
> 对一个反码再求一次反码，就得到了原码
>
> 有理论依据的公式

# 开年第一节课

## 3.系统总线。

总线在计算机的外围

主存：Main Memory

CPU 

IO设备



总线是解决计算机内部互联的。

- 分散连接
- 中央交换结构
- 总线结构

冯诺依曼结构计算机就是分散连接

### 3.1 总线互联

#### 3.1.1 总线的概念

总线是多个模块共享的通信通路。

特征：

- 共享：成本低，结构简单，灵活性好，但是不能并行
- 分时
- 平等竞争

总线的组成：

- 传输线
- 总线接口逻辑
- 总线仲裁部件

传输线：

每一根导线就是一根传输线

​	RS232:设备总线   标准 25    简化 9 

​	EISA ： 系统总线   198 

按照功能的不同： 

- 数据线
- 地址线
- 控制线

总线  叫 ： BUS

数据总线： 传输数据的通路 ，       数据线也叫数据总线。。总线： 代表多根的意思。

- 双向
- 数据线宽度
- 并行传输能力

地址线： 也叫地址总线

- 传输数据地址的通路
- 单向，由CPU发出        说明目前的计算机是集中控制的计算机
- 地址线宽度
- 寻址、寻址能力

指令系统  ： 软件开发的模式和框架

总线位数越高，（如地址线），则寻址范围越广，性能越好。但是导线越多，相互 干扰越强，目前普遍使用64位总线

控制线：

- 传送控制信号的通信
- 单向
- 命令、响应、定时

典型的控制线：

1. 电源（3、5V)、地
2. 时钟
3. 复位
4. 存储器读
5. 储存器写
6. I/O 读
7. I/O写
8. 总线请求
9. 总线授权
10. 中断请求
11. 中断响应
12. 传输响应 

时钟周期：计算机中的最小时间单位，发出方形波，在上升沿做判断，在下降沿做动作。

机器周期

指令周期



时间漂移： 只要范围小于T/2，就认为是正确的



#### 3.1.2 接口逻辑

外部设备的个体差异

- 速度
- 数据表示
- 操作方式

统一的，规整的  设备

CPU只控制接口。

方式： 串行   并行

接口逻辑提供了一个能力范围，在这一范围内，CPU能用简单的方法访问多种类型的设备。

按照一定规则生产设备。

功能: 

- 连接器
- 转换器

接口也成为 适配器。

#### 3.1.3仲裁部件

- 为什么要仲裁
- 什么是仲裁
- 仲裁方法

方式 ： 集中式，分布式。

#### 3.1.4 总线的工作过程

总线的主设备（CPU）、总线从设备

总线的状态 ： 总线忙（低电平）     总线不忙（高电平）

总线占用期

总线事务：

- 请求
- 裁决
- 地址
- 数据
- 释放



总线不忙的时候，总线传输 “空号” 为逻辑1 （只有1 和 0） ，行业习惯为 逻辑1



总线的工作过程： 

1. 申请
2. 授权
3. 使用
4. 释放

计时器： 均为归零计时器： 从 45 开始，减一、减一 直到 0 结束。



总线的分类：

按传送方式：

- 串行总线，数据线只有一根。传输线有若干根
- 并行总线，数据线有多跟。复杂。远距离传送用串行。

按数据线的宽度：

- 8 bit 
- 16 bit
- 32 bit
- 64 bit

按照总线所处的位置： 

- 片内总线     也叫局部总线
- 系统总线
- 外总线       也叫设备总线

按总线作用的方位： 

- 局部总线
- 系统总线
- 设备总线

### 3.2四大特性

- 机器特性，物理连接
- 电器特性，逻辑连接，解决逻辑0 和逻辑1 的问题
- 功能特性，功能定义
- 时间特性，动态特性，也叫过程特性

使用负逻辑 能使 效率更高

#### 总线的主要性能指标和设计要素

时钟频率 : 时钟周期。

信号线类型 ： 

- 专用： 数据线和地址线和控制线 互不干扰，并排进行
- 复用 ： 地址线和数据线合并，分时运行，先地址，后数据

总线宽度： 数据线宽度 /地址线宽度

总线带宽： 总线的宽度就是数据线的宽度。带宽由时钟频率和数据线宽度决定。每秒总线传输的二进制位数

定时方式：

- 同步
- 异步
- 准同步

传送方式： 

- 串行
- 并行

仲裁策略： 

- 集中、
- 异步

数据传输类型： 读、写、读-修改-写、写后读、块操作 （不用看）

即插即用：

#### 3.2.4 总线的标准化

- 标准化的要求
- 标准化的途径

#### 3.1.5多总线分级结构

- 但总线结构
- 传统的多总线分级结构
- 中间层结构

# 第二课

## 总线的工作过程

BR	：  先申请，再使用。

BG ： 总线仲裁、授权

BB ： 获得总线的使用权的设备之总线忙

释放: 一个总线占用期后释放总线。

## 单总线结构：

系统总线。

只有一条总线的结构叫做单总线结构。

## 传统的多总线结构。

局部总线： 局部总线是	CPU总线的外延。连接CPU和Cache。高速总线。

系统总线: 主存和Cache都连在系统总线上。

扩充总线。



只适用于 80486 CPU

多总线结构：  和主存储器连接的总线一定就是系统总线。

## 中间层结构：

使用与所有CPU

局部总线 系统总线  高速总线   扩充总线

## 系统总线 ：

## 总线定时：

- 同步的概念
- 同步定时

同步的概念： 

什么是同步，基本方法

通信定时： 

发送方  接收方  总线

不发送信息的时候 我们希望接收方不收到信息。

当总线不工作时，一直在传输空号，既 11111....  。

如果 A没有发送，B就不要接收。------这就是同步

同步的方法：

- 同步定时
  - 最主要的特征：时钟
  - 存在时钟漂移缺点，不能进行远距离传送
- 异步定时
  - 打电话 就是一个典型的异步定时
  - 请求 
  - 应答
  - 由请求触发应答
  - 请求和应答的互锁关系：
    - 不互锁
    - 半互锁： 请求的结束 由响应的开始决定
    - 全互锁 ： 请求的结束由响应的开始决定；应答的结束由请求的结束决定
  - 互锁方式 越安全，越复杂。 我们使用这种方案。选用半互锁。
- 准同步定时: 在同步定时的基础上 ，增加向存储器询问是否准备好这一步骤。
- 远距离通信用异步定时。同步定时对部件要求比较高。

## 数据传送方式

在总线上传送数据。

- 串行传送
- 并行传送

数据在总线上怎么传的:

## 几个概念：

- 数据

- 信号
  - 振幅
  - 频率。调频的收音机更好
  - 相位 。调相的设备一定是准确度要求很高的设备。
- 信息

- 码元

- 传输开销

01 信息由信号进行携带，通过调制后携带01信息，携带01信息的信号叫做码元

基本的传送方式：

串行传送： 

	-  一根数据线就把数据传送走了

并行传送： 

- 多根数据线

计算机内部的数据是并行的。

## 串行传送：

- 异步传送：
  - 帧 ：
  - 波特率：信号变化的频率，单位: Baud
  - 数据传输速率：单位时间传输的那位位数，位/秒。字节/秒。。字： 各个计算机的定义不一致。但是字节： 就是指 8 bit。理想的数据传输速率叫做 总线带宽
- 同步传送： 

一元调制 ： S = B 。数据速率 和波特率是相等的。 一个波特信号 携带 一个二进制位

多远调制： S> B      数据速率大于波特率       一个信号携带两个二进制位

目前一个信号携带4个二进制位。一个信号有16 个状态

## 并行传送：

- 基本原理
- 优缺点及应用
- 并串行传送

